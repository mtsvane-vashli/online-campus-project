# オンラインキャンパス体験サービス - プロトタイプ

このプロジェクトは、九州大学のキャンパスをオンライン上で体験できるWebアプリケーションのプロトタイプです。遠方の受験生などが、実際に現地を訪れることなく、キャンパスの雰囲気や施設をバーチャルに探索し、AIチャットボットを通じて疑問を解消することを目的としています。

## ✨ 主な機能

- **3Dキャンパス探索**:
    - 三人称視点（TPS）で狐のキャラクターを操作し、3D空間を自由に歩き回ることができます。
    - `W, A, S, D`キーで移動、`Shift`キーで走り、マウスで視点操作が可能です。
- **インタラクティブな情報ポイント**:
    - 空間内に設置されたオブジェクトに近づき、`E`キーを押すことで、その場所に関する詳細情報をパネルで表示・非表示できます。
- **AIチャットボット**:
    - 画面右下のチャットボタンから、AIチャットボットと対話できます。
    - ユーザーからの質問に対し、バックエンドサーバー経由でGoogle Gemini APIが応答を生成して返します。

---

## 🛠️ 技術スタック

- **フロントエンド**:
    - **3D描画**: Three.js
    - **物理演算**: cannon-es
    - **ビルドツール**: Vite
    - **言語**: JavaScript (ESM)
- **バックエンド**:
    - **サーバー**: Node.js, Express.js
    - **AI**: Google Generative AI (Gemini Pro)
    - **その他**: cors, dotenv
- **プロジェクト構造**:
    - フロントエンドとバックエンドを明確に分離。
    - フロントエンドは、役割ごとにファイルを分割したモジュール設計を採用しています。（World, UI, Modelsなど）

---

## 🚀 実行方法

### 1. 必要なもの

- [Node.js](https://nodejs.org/ja) (v18.x.x 以上を推奨)

### 2. セットアップ

プロジェクト全体をクローンした後、フロントエンドとバックエンドの依存関係をインストールします。

```bash
# プロジェクトのルートディレクトリで実行

# フロントエンドのセットアップ
cd frontend
npm install

# バックエンドのセットアップ
cd ../backend
npm install
```

### 3. 環境変数の設定

バックエンドの機能にはGoogle Gemini APIキーが必要です。

1.  `backend`フォルダ内に`.env`という名前のファイルを作成します。
2.  以下の形式でAPIキーを記述します。

    ```
    GEMINI_API_KEY=YOUR_API_KEY_HERE
    ```

### 4. アプリケーションの起動

#### **ステップ1: バックエンドサーバーの起動**

ターミナルを一つ開き、`backend`ディレクトリで以下のコマンドを実行します。

```bash
# backendディレクトリで実行
node server.js
```
コンソールに「サーバーがポート3000で起動しました。」と表示されれば成功です。

#### **ステップ2: フロントエンドの起動**

別のターミナルを開き、`frontend`ディレクトリで開発サーバーを起動します。

```bash
# frontendディレクトリで実行
npm run dev
```

表示されたURL（通常は `http://localhost:5173`）にブラウザでアクセスします。

---

## 📂 プロジェクト構造

```
.
│  README.md
│  
├─backend/
│  │  .env          # APIキーなどの環境変数を格納
│  │  server.js     # Expressサーバー本体
│  │  package.json
│  └─node_modules/
│
└─frontend/
   ├─src/
   │  │  main.js             # アプリケーションのエントリーポイント
   │  │  config.js           # 設定ファイル
   │  │  InputManager.js     # 入力処理を管理
   │  ├─World/
   │  │  │  World.js          # 3D世界の骨格を管理
   │  │  │  environment.js    # 地面やライティングを作成
   │  │  └─models/
   │  │      │  Character.js  # キャラクターを管理
   │  │      └─InfoBox.js    # 情報ボックスを管理
   │  └─UI/
   │     │  Chat.js           # チャットUIを管理
   │     └─InteractionUI.js  # 情報パネルUIを管理
   └─public/
      │  index.html
      └─assets/
             fox.glb
```

---

## 今後の展望

- 九州大学の3Dモデルへの差し替え
- 情報ポイントの増設とコンテンツ拡充
- AIの応答精度の向上（RAG技術の導入など）
- UI/UXのさらなる改善
- インターネットへのデプロイ